<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>GlassBowl - Close the Wage Gap</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <!-- Bootstrap Core CSS -->
    <link href="static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="static/css/stylish-portfolio.css" rel="stylesheet">
    <link href="static/css/main.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css">
    <script type="text/javascript" src="https://platform.linkedin.com/in.js">
    api_key:   75m5gt0r62gd7v
    authorize: true
    onLoad: onLinkedInLoad
</script>

<script type="text/javascript">

    // Setup an event listener to make an API call once auth is complete
    function onLinkedInLoad() {
        IN.Event.on(IN, "auth", getProfileData);
    }
  // Handle the successful return from the API call
    function onSuccess(data) {
        console.log(data);
        var user=data.siteStandardProfileRequest.url;
        var index=user.match(/&authType/);
        user=user.substr(0, index.index);
        console.log(user);
        $("#inputurl").attr('value', user);
        console.log($("#inputurl").val());
        $("#go_form").trigger("click");
    }
    // Handle an error response from the API call
    function onError(error) {
        console.log(error);
    }

    // Use the API call wrapper to request the member's basic profile data
    function getProfileData() {
        IN.API.Raw("/people/~").result(onSuccess).error(onError);
    }

</script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">
    #inputurl{
        width: 500px;
        height: 40px;
    }
    #small{
        width: 80px;
        height: 50px;
        margin-right: 20px;
    }
   input{
        text-align: center;
    }
    </style>
</head>

<body>

    <!-- Navigation -->

<nav class="navbar navbar-default navbar-fixed-top collapse navbar-collapse">
<ul class="nav navbar-nav">
    <li>
        <a id= "small" href="#top"  onclick = $("#menu-close").click(); ><img src="static/img/icon.png" alt="our logo" height = "150%" width = "150%"></a>
    </li>
    <li>
        <a href=""><script type="IN/Login"></script></a>
    </li>
    <li>
     <a  id = "logout" class = "nav navbar-nav navbar-right" href="#contact" onclick = $("#menu-close").click(); >Log out</a>
     </li>
</ul>

</nav>

    <!-- Header -->
    <header id="top" class="header">
        <div class="text-vertical-center">
            <h1>Bridge the Wage Gap</h1><br>
            <h3>Are you getting paid enough?</h3>
            <br>
        <form method = "post" action="/search">
        <input  id = "inputurl" type = "text" name="linkedin_url" placeholder = "Linkedin URL - eg. https://www.linkedin.com/in/jeffweiner08">
        <input href ="#services" id = "go_form" type = "submit" value = "Go!" style ="color: teal;font-face: 'Comic Sans MS'; font-size: larger">
        </form>
        </div>
    </header>

    <!-- About -->
    <section id="about" class="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Empower your career with global salary data.</h2>
                    <h4 class="lead"><i>Let GlassBowl do the negotiating for you.</i></h4>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>

<div id = "register">
    <!-- Callout -->

    <aside class="callout">
        <div class="text-vertical-center">
            <h3>What are people earning in your industry? </h3>
            <form method = "" action = "post">
               <input id="inputurl" type="text" name="linkedin_url" placeholder="LinkedIn Email">
                <input type = "submit" value = "register" style ="color: teal; background-color: #FFFFC0;font-face: 'Comic Sans MS'; font-size: larger">
            </form>
             <form method = "" action = "post">
               <input id="inputurl" type="text" name="linkedin_url" placeholder="LinkedIn Email">
                <input type = "submit" value = "login" style ="color: teal; background-color: #FFFFC0;font-face: 'Comic Sans MS'; font-size: larger">
            </form>
        </div>
    </aside>
<!-- salary -->
    <a name="services"></a>
       <section id="services" class="services">
        <div class="container">
            <div class="text-center">
                <div class="col-lg-10 col-lg-offset-1">
                  <h2>People with Your Experience</h2>
                    <div id = "ave_sal"></div>
                   <table id = "stage" class = "table-striped table">

                   </table>
                    <div>

                    </div>
                    <!-- /.row (nested) -->
                </div>
                <!-- /.col-lg-10 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
<!-- peers -->
    <section id="services" class="services bg-primary">

        <div class="container">
            <div class="text-center">
                <div class="col-lg-10 col-lg-offset-1">
                    <h2>Similar Profiles</h2>
         <!--            <div id = "peer"></div> -->
                    <div id = "peers">
                        <div class="col-md-4 col-sm-6">
                            <div class="service-item">
                                <span class="fa-stack fa-4x">
                                <img id = "p1" class="fa fa-circle fa-stack-2x" src="http://www.icon2s.com/wp-content/uploads/2014/06/animal-icon-pony.png">
      <!--                           <i class="fa fa-cloud fa-stack-1x text-primary"></i> -->
                            </span>

                                <p id='headline1'>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                                <a href="#" class="btn btn-light">Learn More</a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="service-item">
                                <span class="fa-stack fa-4x">
                                <img id = "p2" class="fa fa-circle fa-stack-2x" src="http://en.xn--icne-wqa.com/images/icones/1/4/animals-elk.png">
                              <!--   <i class="fa fa-compass fa-stack-1x text-primary"></i> -->
                            </span>

                                <p id='headline2'>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                                <a href="#" class="btn btn-light">Learn More</a>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="service-item">
                                <span class="fa-stack fa-4x">
                                <img id = "p3" class="fa fa-circle fa-stack-2x" src="http://www.icon2s.com/wp-content/uploads/2014/06/animal-icon-jellyfish.png">
                    <!--             <i class="fa fa-flask fa-stack-1x text-primary"></i> -->
                            </span>

                                <p id='headline3'>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                                <a href="#" class="btn btn-light">Learn More</a>
                            </div>
                        </div>
                     <!--    <div class="col-md-3 col-sm-6">
                            <div class="service-item">
                                <span class="fa-stack fa-4x">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-shield fa-stack-1x text-primary"></i>
                            </span>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
                                <a href="#" class="btn btn-light">Learn More</a>
                            </div>
                        </div> -->
                    </div>
                    <!-- /.row (nested) -->
                </div>
                <!-- /.col-lg-10 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>


</div>

    <!-- Footer -->
    <footer id = "contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1 text-center">
                    <h4><strong>Glass Bowl</strong>
                    </h4>
                    <p>580 N. Mary Ave<br>Sunyvale, CA 94536</p>
                    <ul class="list-unstyled">
                        <li><i class="fa fa-phone fa-fw"></i> (650) 479-4940</li>
                        <li><i class="fa fa-envelope-o fa-fw"></i>  <a href="mailto:goldfish@glassbowl.info">goldfish@glassbowl.info</a>
                        </li>
                    </ul>
                    <br>
                    <ul class="list-inline">
                        <li>
                            <a href="#"><i class="fa fa-facebook fa-fw fa-3x"></i></a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-twitter fa-fw fa-3x"></i></a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-dribbble fa-fw fa-3x"></i></a>
                        </li>
                    </ul>
                    <hr class="small">
                    <p class="text-muted">Copyright &copy; GlassBowl 2015</p>
                </div>
            </div>
        </div>
    </footer>

        <!-- jQuery -->
<script src="static/js/jquery.js"></script>


<!-- Bootstrap Core JavaScript -->
<script src="static/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script>
// Closes the sidebar menu
$("#menu-close").click(function(e) {
    e.preventDefault();
    $("#sidebar-wrapper").toggleClass("active");
});

// Opens the sidebar menu
$("#menu-toggle").click(function(e) {
    e.preventDefault();
    $("#sidebar-wrapper").toggleClass("active");
});

// Scrolls to the selected menu item on the page
$(function() {
    $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') || location.hostname == this.hostname) {

            var target = $(this.hash);
            target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
            if (target.length) {
                $('html,body').animate({
                    scrollTop: target.offset().top
                }, 1000);
                return false;
            }
        }
    });
});
$("#logout").click(function(){
    IN.User.logout(function(){
        window.location = "/";
    })
});

$(document).ready(function () {
        $("#go_form").click(function getresponse(e){
            window.location.hash = "/";
            e.preventDefault();
            var jdata = JSON.stringify({'url': $("#inputurl").val()});
            $("#ave_sal").html("");
          $.ajax({
            type: 'POST',
            url: '/search',
            dataType: "json",
            contentType: "json/application",
            data: jdata,
            crossDomain: true,
            success:    function (res) {
                    $("#stage").html("");
                    $("#ave_sal").html("<h4>How are they doing?</h4><h5><b>min</b>: " + res.min_salary+" | <b>max</b>: "+res.max_salary+" | <b>average</b>: "+res.ave_salary+"</h5>");
                        
                        $("#stage").append("<tr><td>Position</td><td>Employer</td><td>Salary</td></tr>");

                        json = res.jobs;
                        for (var i = 0; i < json.length; i++) {
                            $("#stage").append("<tr>",
                                "<td>" + json[i].Title, "<td>" + json[i].Company,
                                '<td align="right">' + json[i].Salary)
                        };
                        // $("#stage").css({
                        //     'background-color':'red'}
                        //     );
                        window.location.hash = "#services";
                        jdata = {};
                        $.ajax({
                            type: 'POST',
                            url: '/search_ppl',
                            dataType: "json",
                            contentType: "json/application",
                            data: jdata,
                            crossDomain: true,
                            success:    function (json) {
                                console.log(json);
                            for (var i = 0; i < json.length; i++) {
                                var x = i+1;
                                x = "#p" + x;
                                $(x).attr('src', json[i].img);
                                $('p#headline'+x).html(json[i].headline);
                            };

                            },
                            error: function (request, status, error) {
                                console.log(error);
                            }
                        })
                    },
            error: function (request, status, error) {
                alert(error);
            }
        });

    })

});
</script>

</body>

</html>
